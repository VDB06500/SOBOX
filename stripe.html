<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paiement en ligne avec Stripe</title>
<script src="https://js.stripe.com/v3/"></script>
<style>
* {
box-sizing: border-box;
margin: 0;
padding: 0;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
min-height: 100vh;
display: flex;
justify-content: center;
align-items: center;
padding: 20px;
}

.container {
background-color: white;
border-radius: 12px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
width: 100%;
max-width: 500px;
overflow: hidden;
}

header {
background: #635bff;
color: white;
padding: 25px;
text-align: center;
}

header h1 {
font-size: 1.8rem;
margin-bottom: 10px;
}

.content {
padding: 30px;
}

.product {
display: flex;
align-items: center;
margin-bottom: 25px;
padding-bottom: 25px;
border-bottom: 1px solid #eee;
}

.product-image {
width: 80px;
height: 80px;
border-radius: 8px;
background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 100%);
margin-right: 20px;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: bold;
font-size: 1.2rem;
}

.product-info h2 {
font-size: 1.3rem;
margin-bottom: 5px;
color: #333;
}

.product-info p {
color: #666;
margin-bottom: 8px;
}

.price {
font-size: 1.5rem;
font-weight: bold;
color: #635bff;
}

.payment-form {
margin-top: 20px;
}

.form-group {
margin-bottom: 20px;
}

label {
display: block;
margin-bottom: 8px;
font-weight: 500;
color: #555;
}

input, select {
width: 100%;
padding: 14px;
border: 1px solid #ddd;
border-radius: 8px;
font-size: 1rem;
transition: border-color 0.3s;
}

input:focus, select:focus {
border-color: #635bff;
outline: none;
box-shadow: 0 0 0 2px rgba(99, 91, 255, 0.2);
}

.card-element {
background: white;
padding: 14px;
border: 1px solid #ddd;
border-radius: 8px;
margin-bottom: 20px;
}

.pay-button {
background: #635bff;
color: white;
border: none;
padding: 16px;
width: 100%;
border-radius: 8px;
font-size: 1.1rem;
font-weight: 600;
cursor: pointer;
transition: background 0.3s, transform 0.2s;
display: flex;
justify-content: center;
align-items: center;
}

.pay-button:hover {
background: #4a42e0;
}

.pay-button:active {
transform: translateY(2px);
}

.pay-button.loading {
background: #8c86ff;
}

.spinner {
border: 3px solid rgba(255, 255, 255, 0.3);
border-radius: 50%;
border-top: 3px solid white;
width: 20px;
height: 20px;
animation: spin 1s linear infinite;
margin-right: 10px;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.result-message {
padding: 15px;
border-radius: 8px;
margin-top: 20px;
text-align: center;
font-weight: 500;
display: none;
}

.success {
background-color: #d4edda;
color: #155724;
border: 1px solid #c3e6cb;
display: block;
}

.error {
background-color: #f8d7da;
color: #721c24;
border: 1px solid #f5c6cb;
display: block;
}

footer {
text-align: center;
padding: 20px;
color: #777;
font-size: 0.9rem;
background-color: #f9f9f9;
border-top: 1px solid #eee;
}

.card-logos {
display: flex;
justify-content: center;
gap: 15px;
margin-top: 10px;
}

.card-logo {
width: 40px;
height: 25px;
background-color: #f0f0f0;
border-radius: 4px;
display: flex;
align-items: center;
justify-content: center;
font-size: 0.7rem;
color: #888;
font-weight: bold;
}

@media (max-width: 480px) {
.container {
border-radius: 0;
}

.content {
padding: 20px;
}

header {
padding: 20px 15px;
}
}
</style>
</head>
<body>
<div class="container">
<header>
<h1>Paiement Sécurisé</h1>
<p>Votre achat en toute confiance</p>
</header>

<div class="content">
<div class="product">
<div class="product-image">PROD</div>
<div class="product-info">
<h2>Formation Premium JavaScript</h2>
<p>Accès à vie - Contenu mis à jour</p>
<div class="price">49,99 €</div>
</div>
</div>

<div class="payment-form">
<div class="form-group">
<label for="email">Email</label>
<input type="email" id="email" placeholder="votre@email.com" required>
</div>

<div class="form-group">
<label for="name">Nom complet</label>
<input type="text" id="name" placeholder="Votre nom complet" required>
</div>

<div class="form-group">
<label>Détails de la carte</label>
<div id="card-element" class="card-element"></div>
</div>

<button id="pay-button" class="pay-button">
<span id="button-text">Payer maintenant</span>
</button>

<div id="result-message" class="result-message"></div>
</div>
</div>

<footer>
<p>Paiement sécurisé avec Stripe</p>
<div class="card-logos">
<div class="card-logo">VISA</div>
<div class="card-logo">MC</div>
<div class="card-logo">AMEX</div>
</div>
</footer>
</div>

<script>
// Configuration de Stripe avec votre clé publique
const stripe = Stripe('pk_test_51PJkZgJ9YfD9d0tQq3r0Z7c8n4z2Qa5p2gX5k2s3v8L0f7i4xR1Xr0V6w3wYdH5aF1z3l0b6sT8e4m1aF0');

// Créer les éléments de carte Stripe
const elements = stripe.elements();
const cardElement = elements.create('card', {
style: {
base: {
fontSize: '16px',
color: '#32325d',
'::placeholder': {
color: '#aab7c4'
}
},
invalid: {
color: '#fa755a',
iconColor: '#fa755a'
}
}
});
cardElement.mount('#card-element');

// Références aux éléments du DOM
const payButton = document.getElementById('pay-button');
const buttonText = document.getElementById('button-text');
const resultMessage = document.getElementById('result-message');
const emailInput = document.getElementById('email');
const nameInput = document.getElementById('name');

// Gestionnaire d'événement pour le bouton de paiement
payButton.addEventListener('click', async () => {
// Validation des champs
if (!emailInput.value || !nameInput.value) {
showResult('Veuillez remplir tous les champs', 'error');
return;
}

// Désactiver le bouton pendant le traitement
payButton.disabled = true;
payButton.classList.add('loading');
buttonText.innerHTML = '<div class="spinner"></div> Traitement...';

try {
// Créer un PaymentMethod avec Stripe
const { paymentMethod, error } = await stripe.createPaymentMethod({
type: 'card',
card: cardElement,
billing_details: {
email: emailInput.value,
name: nameInput.value
}
});

if (error) {
showResult(error.message, 'error');
payButton.disabled = false;
payButton.classList.remove('loading');
buttonText.textContent = 'Payer maintenant';
return;
}

// Simuler un paiement réussi (dans une application réelle, vous enverriez
// le paymentMethod.id à votre backend pour confirmer le paiement)
simulatePaymentSuccess();

} catch (err) {
showResult('Une erreur est survenue: ' + err.message, 'error');
payButton.disabled = false;
payButton.classList.remove('loading');
buttonText.textContent = 'Payer maintenant';
}
});

// Fonction pour simuler un paiement réussi
function simulatePaymentSuccess() {
setTimeout(() => {
showResult('Paiement réussi! Merci pour votre achat.', 'success');

// Réinitialiser le formulaire
cardElement.clear();
emailInput.value = '';
nameInput.value = '';

// Réactiver le bouton
payButton.disabled = false;
payButton.classList.remove('loading');
buttonText.textContent = 'Payer maintenant';
}, 2000);
}

// Fonction pour afficher les messages de résultat
function showResult(message, type) {
resultMessage.textContent = message;
resultMessage.className = 'result-message ' + type;
}

// Afficher un message d'information au chargement
showResult('Ceci est une démonstration. Utilisez les données de test Stripe.', 'success');
</script>
</body>
</html>